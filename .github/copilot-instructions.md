# GitHub Copilot 基本設定

## プロジェクト概要
- Next.js と GCP を使い、企画書（Markdown ベースのアイデアメモ）を作成・共有するためのシンプルなウェブアプリを構築する。
- GCP 側のコストは最小限に抑える（Cloud Run/Functions、Firestore/Storage の無償枠とスケールダウンを優先）。
- 複数人が同時に編集できる UI/UX を提供し、生成した .md ファイルを GitHub Copilot が読み取って提案に活用できるようにする。
- 変更提案時は安全性と可読性を最優先にし、必要に応じてテストや型で補強する。

## コーディング方針
1. 可能な限り TypeScript（フロントエンド）と Node.js/TypeScript（バックエンド）を前提に提案する。
2. React/Next.js 系の UI では関数コンポーネントとフックを基本とし、副作用は `useEffect` に閉じ込める。
3. 変数・関数名は意図が伝わる英語で。略語は避け、ロジックが複雑な箇所だけ簡潔なコメントを添える。
4. ステートやデータ構造は不変パターンを優先し、副作用のある処理はユーティリティに切り出す。
5. Lint/formatter を想定し、オートフォーマットで崩れない書き方を心掛ける。

## アーキテクチャ指針
- Next.js App Router + React Server Components を基本とし、SSR/ISR は最低限に抑えてランタイムコストを削減する。
- 認証とデータ永続化には Firebase Authentication と Firestore（もしくは Cloud Storage + GitHub 連携）を使い、書き込み頻度を抑えるキャッシュ戦略を検討する。
- デプロイ先は Cloud Run（最小インスタンス 0）または Cloud Functions を想定し、CDN は Cloud CDN の無料枠や Vercel 連携を状況に応じて使い分ける。
- 画像や添付を最小限に留め、Markdown テキスト中心の軽量 I/O とする。

## データ永続化とコスト最適化
- Firestore（Native モード）の無料枠（50K reads/20K writes/20K deletes/1GB storage）内に収まる設計を優先し、オンデマンド料金を避ける。
- 読み取りを減らすため Cloud Run で短時間キャッシュ（メモリや Edge Cache）を行い、同一ドキュメントの再読込を抑える。
- 更新頻度が高い場合は Firestore Lite SDK やバッチ書き込みを使い、リアルタイム同期が不要な箇所は Cloud Storage（無料 5GB）に定期スナップショットを保存する。
- 大容量ファイルや履歴保管は GitHub（プライベートリポジトリ）にエクスポートし、GCP 側の無料枠を超えないようにする。

## 機能要件メモ
- Markdown エディタは GitHub Flavored Markdown を基準にし、即時プレビューと履歴管理を実装する。
- 複数人編集ではリアルタイム同期（Firestore の onSnapshot や WebSocket）と楽観的 UI を組み合わせ、競合時は差分マージ指針を表示する。
- 企画書テンプレートを複数用意し、Copilot 連携を想定したメタデータ（タグ、ペルソナ、KPI など）を埋め込めるようにする。
- 生成された .md はダウンロード、Git へのコミット、Copilot への入力など多用途に再利用できる形で出力する。

## テストと品質
- 追加機能には Jest/Testing Library を用いた最小限のテストを提案する。
- バグ修正時は再現ケースと回帰防止のテスト方針を明示する。

## ドキュメントと回答スタイル
- Chat での説明・コメントは日本語を基本とし、必要に応じて英語の識別子を残す。
- 変更理由、影響範囲、次の手順を簡潔に示す。

## 制限事項
- 外部 API キーや秘密情報は絶対に埋め込まない。
- ライセンスが不明なコードは提案しない。OSS を参照する場合は出典とライセンスを確認する。

## チャット
- チャットでの解答は日本語で。
- GCP側でやるべきことがある場合はそれを説明する